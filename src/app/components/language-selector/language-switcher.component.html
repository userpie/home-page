<div class="language-switcher">
  <button
    type="button"
    class="language-btn"
    (click)="toggleDropdown()"
    [attr.aria-expanded]="isOpen()"
    [attr.aria-label]="'Select language - Current: ' + currentLanguage().name"
  >
    <svg
      class="language-icon"
      width="20"
      height="20"
      viewBox="0 0 24 24"
      fill="none"
    >
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
      <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="2"/>
    </svg>
  </button>

  @if (isOpen()) {
    <div class="dropdown">
      @for (language of languages(); track language.code) {
        <button
          type="button"
          class="flag-btn"
          [class.active]="language.code === currentLanguage().code"
          (click)="selectLanguage(language)"
          [attr.aria-label]="'Select ' + language.name"
        >
          <img [src]="language.flag" [alt]="language.name + ' flag'" class="flag-image">
        </button>
      }
    </div>
  }
</div>
