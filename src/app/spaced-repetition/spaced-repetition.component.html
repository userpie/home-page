<div class="spaced-repetition-container">
  @if (!isBrowser) {
    <div class="loading-overlay">
      <div class="loading-content">
        <svg width="48" height="48" viewBox="0 0 48 48" aria-hidden="true">
          <circle cx="24" cy="24" r="20" stroke="#1976d2" stroke-width="4" fill="none" stroke-linecap="round"
                  stroke-dasharray="31.4 31.4" stroke-dashoffset="0">
            <animateTransform attributeName="transform" type="rotate" from="0 24 24" to="360 24 24" dur="1s"
                              repeatCount="indefinite"/>
          </circle>
        </svg>
        <div style="font-size: 1.2rem; color: #444;">Loading...</div>
      </div>
    </div>
  }
  <header class="header">
    <div class="header-top">
      <h1>{{ 'spaced-repetition.title' | translate }}</h1>
      <app-language-switcher></app-language-switcher>
    </div>

    <nav class="view-navigation">
      <button
        type="button"
        (click)="toggleToCollections()"
        class="btn btn-nav"
        [class.active]="currentView() === 'collections'"
      >
        {{ 'spaced-repetition.collections' | translate }}
      </button>
      <button
        type="button"
        (click)="toggleToFlashcards()"
        class="btn btn-nav"
        [class.active]="currentView() === 'flashcards'"
      >
        {{ 'spaced-repetition.flashcards' | translate }}
      </button>
    </nav>
  </header>

  @if (currentView() === 'collections') {
    <app-collections (startStudyingCollection)="onArraySelected($event)"></app-collections>
  } @else if (selectedFlashcards()) {
    <app-flashcards [selectedFlashcards]="selectedFlashcards()"></app-flashcards>
  }
</div>
